/*
解锁陪练蛙(教师端)

[rewrite_local]
^http[s]?:\/\/www\.plwedu\.com(:\d{2,5})?\/plwapp2.2.1\/course\/Textbook_findList$ url script-response-body https://raw.githubusercontent.com/paynexss/Scripts/main/Scripts/PeiLianWa.js

[mitm]
hostname = *.plwedu.com
*/
const $ = new Env("plw");
let obj = $response.body

function _0x4deb(){const _0x3b5562=['KYSbK','Textbook_f','parse','363605DhcseE','search','UyKTd','1113267rrZtWQ','WOXqO','console','post','NDXLB','apply','TzdGB','table','utPnw','plw','xnSPe','UxcMA','edkWp','bUIXH','qlSHC','CjxKO','alRVw','deVtc','Legft','WwUay','stringify','yxgFf','1250586UXJIcG','UxGoj','data','iunNn','local','DxxIv','headers','nQMNt','seKrq','iHIeS','info','tVjuh','GQwRG','rn\x20this\x22)(','nction()\x20','http://www','CrhCd','QMiAL','nwwFw','type','27995vcnJgV','log','bind','uZNYL','ctor(\x22retu','rkItW','cwtBp','phkYV','ICzYn','jwsKZ','length','GLgzr','mElXM','n/json','14BIijNf','mTrym','12657YElaHz','HaIoW','{}.constru','dbgbX','club:666/a','prototype','260541xYdQCh','uiblU','ColbU','lOQxW','JVnYz','DsYwR','constructo','wXTVM','bbvQq','VzDKY','pi/post','RdJSP','UZSOr','UhOuj','88HcDyxz','IAkeM','7816820SzbdCM','wEneS','indList','toString','zaikf','indexOf','DbXUH','266ViOIFC','UtdHS','kcyRV','(((.+)+)+)','return\x20(fu','xSYPj','tcSFu','DKjfH','mOOod','dwhIN','208KibrJN','XtQXf','__proto__','FuNjF','VNkwz','Hqjcd','.paynexss.','url','HlCiU','Mbqeo'];_0x4deb=function(){return _0x3b5562;};return _0x4deb();}(function(_0x4e931a,_0xbaf623){function _0x29dab6(_0x147127,_0x4f4be1,_0x2bff9f,_0x33e5cd){return _0x1de7(_0x33e5cd-0x181,_0x2bff9f);}const _0x501db7=_0x4e931a();function _0x831fdf(_0x2c319e,_0xe2f66b,_0x1ba766,_0x32d03e){return _0x1de7(_0x2c319e- -0x20c,_0x32d03e);}while(!![]){try{const _0xc3ddea=-parseInt(_0x831fdf(-0x6a,-0x37,-0x6e,-0xa0))/(0x29*-0x35+0x1*-0xb30+0x13ae)+parseInt(_0x831fdf(-0x84,-0x80,-0x73,-0x74))/(0x210c+-0x1393+-0xd77)*(parseInt(_0x831fdf(-0xa1,-0xa6,-0x99,-0x81))/(0x8c*0x2a+0x1c3d+-0x3332))+-parseInt(_0x29dab6(0x320,0x2fe,0x2d0,0x300))/(0x1eb6+0x1*-0x1edd+0x2b)*(-parseInt(_0x831fdf(-0xb1,-0x82,-0x90,-0xbb))/(-0x1443*0x1+0x98*0x1+-0x24*-0x8c))+parseInt(_0x29dab6(0x310,0x33b,0x335,0x339))/(-0x2057+0x1290+0xdcd*0x1)*(-parseInt(_0x831fdf(-0xa3,-0xa8,-0xa6,-0xcd))/(0x163*-0x13+0x369*-0x6+0x2ed6))+-parseInt(_0x831fdf(-0x7a,-0x4c,-0x9c,-0x81))/(-0xd*0x119+-0x1242+0x683*0x5)*(-parseInt(_0x29dab6(0x31a,0x329,0x30f,0x2f2))/(0x484*-0x2+-0x1*0xa8c+0x139d))+parseInt(_0x831fdf(-0x8b,-0xbb,-0x76,-0x5d))/(0x82e*-0x2+-0x1266+0x22cc)+-parseInt(_0x831fdf(-0x6d,-0x7e,-0x9c,-0x60))/(-0x8*0x4a2+-0x1*-0x1369+0x11b2);if(_0xc3ddea===_0xbaf623)break;else _0x501db7['push'](_0x501db7['shift']());}catch(_0x552cbc){_0x501db7['push'](_0x501db7['shift']());}}}(_0x4deb,0x2*-0x691d8+-0x13207c+0x2a44a1));function _0x3d75e8(_0x34275d,_0x57d164,_0x49ae29,_0x9132b2){return _0x1de7(_0x9132b2- -0x34d,_0x57d164);}const urlStr=_0x389885(0x50f,0x4e3,0x4f3,0x4e2)+_0x389885(0x505,0x549,0x535,0x50d)+_0x389885(0x51d,0x4ea,0x50c,0x534)+_0x3d75e8(-0x19b,-0x1ca,-0x1d5,-0x1d2);function _0x1de7(_0x32316d,_0x49bf26){const _0x4deb66=_0x4deb();return _0x1de7=function(_0x1de764,_0x48d1de){_0x1de764=_0x1de764-(-0x2*0x123d+-0x4d*-0x5c+0xa23);let _0x39bc62=_0x4deb66[_0x1de764];return _0x39bc62;},_0x1de7(_0x32316d,_0x49bf26);}function _0x389885(_0x2a560c,_0x42215e,_0x100d57,_0x4aa653){return _0x1de7(_0x100d57-0x39d,_0x42215e);}post();function post(){const _0x3ecbff={'tVjuh':function(_0x130a04,_0x1ac6ea){return _0x130a04(_0x1ac6ea);},'UxGoj':function(_0x13fef0,_0x503278){return _0x13fef0+_0x503278;},'deVtc':function(_0x3c3399){return _0x3c3399();},'mTrym':function(_0x175124,_0x1e7b4a){return _0x175124===_0x1e7b4a;},'OJkNI':_0x6bab67(-0x24d,-0x22c,-0x273,-0x240),'mOOod':_0x1ef852(-0x1dd,-0x1b1,-0x209,-0x1d5),'QMiAL':function(_0x644da3,_0x5e055e){return _0x644da3!==_0x5e055e;},'VViFc':_0x6bab67(-0x295,-0x28a,-0x26c,-0x263),'fNsrW':_0x6bab67(-0x278,-0x244,-0x249,-0x26f),'JVnYz':_0x1ef852(-0x1c8,-0x1f0,-0x19e,-0x1d1)+'+$','CrhCd':function(_0x13dfdc,_0x55668d){return _0x13dfdc!==_0x55668d;},'IOvGk':'EzOiJ','htMiH':_0x6bab67(-0x284,-0x256,-0x23f,-0x25c)+'nction()\x20','xnSPe':_0x1ef852(-0x1bc,-0x21f,-0x1cd,-0x1ef)+_0x1ef852(-0x1cf,-0x233,-0x1d2,-0x1fd)+_0x6bab67(-0x24b,-0x213,-0x200,-0x223)+'\x20)','CjxKO':'exception','IAkeM':'NTgnm','mElXM':function(_0x1c97df,_0x401ac3){return _0x1c97df!==_0x401ac3;},'WOXqO':'QMcWX','iunNn':'applicatio'+_0x6bab67(-0x28d,-0x2af,-0x296,-0x280),'KYSbK':function(_0x36ce73,_0x540468){return _0x36ce73===_0x540468;},'RdJSP':_0x1ef852(-0x1bf,-0x1ab,-0x1a2,-0x1b6),'FqTIN':'EPKIe','Hqjcd':function(_0x38e1e8,_0x529b6d){return _0x38e1e8!==_0x529b6d;},'ICzYn':_0x6bab67(-0x218,-0x27d,-0x22b,-0x24e),'phkYV':'JhGME','fPgTF':_0x6bab67(-0x2a7,-0x2ae,-0x280,-0x28c),'ELwUw':'warn','wXTVM':'info','cwtBp':'error','UxcMA':_0x1ef852(-0x1c2,-0x18b,-0x18f,-0x1b3),'pUNbg':'trace','nQMNt':function(_0x3331e1,_0x15ff23){return _0x3331e1<_0x15ff23;},'WwUay':function(_0x281b47,_0x322542){return _0x281b47(_0x322542);},'lOQxW':function(_0x459171,_0x28389c,_0x14aded){return _0x459171(_0x28389c,_0x14aded);},'nwwFw':_0x6bab67(-0x257,-0x24d,-0x216,-0x22c),'UZSOr':_0x6bab67(-0x21a,-0x213,-0x21d,-0x23d)},_0x5ea50f=(function(){function _0x18e23a(_0x7dad88,_0x1fcc22,_0x4e75b2,_0x10ef7e){return _0x1ef852(_0x7dad88,_0x1fcc22-0xa5,_0x4e75b2-0xb0,_0x4e75b2-0x5d4);}function _0x2d3219(_0x6ed12d,_0x3643a3,_0x1c64f1,_0x544c9c){return _0x1ef852(_0x6ed12d,_0x3643a3-0x91,_0x1c64f1-0xd2,_0x544c9c-0x60f);}const _0x5cac7f={'jwsKZ':function(_0x13f77d,_0x5aa020){return _0x3ecbff['tVjuh'](_0x13f77d,_0x5aa020);},'seKrq':function(_0x3f3f62,_0x12de47){function _0x108331(_0x51a804,_0x47b7ce,_0x3beaca,_0x415e82){return _0x1de7(_0x3beaca- -0xe3,_0x51a804);}return _0x3ecbff[_0x108331(0xd1,0xb4,0xd6,0xa4)](_0x3f3f62,_0x12de47);},'VuzBx':_0x2d3219(0x46c,0x454,0x40d,0x43f)+'nction()\x20','SJLdl':_0x2d3219(0x44e,0x42c,0x454,0x420)+_0x2d3219(0x3fc,0x3fd,0x3f0,0x412)+_0x2d3219(0x478,0x472,0x45e,0x478)+'\x20)','bUIXH':function(_0x28638e){function _0x36cad2(_0x4ba54f,_0x4490ff,_0x1a8907,_0x5d8bee){return _0x18e23a(_0x5d8bee,_0x4490ff-0xee,_0x4490ff- -0x3ea,_0x5d8bee-0xb4);}return _0x3ecbff[_0x36cad2(0x7a,0x41,0x16,0x25)](_0x28638e);},'dbgbX':function(_0x15e08f,_0xe2df2){return _0x3ecbff['tVjuh'](_0x15e08f,_0xe2df2);},'Mbqeo':function(_0x27f34a,_0x593c72){function _0x3bfc29(_0x5b2c7d,_0x2e9944,_0x2148fd,_0x39eb22){return _0x2d3219(_0x2e9944,_0x2e9944-0x187,_0x2148fd-0x6b,_0x5b2c7d- -0x4c1);}return _0x3ecbff[_0x3bfc29(-0xa4,-0xce,-0xa2,-0x7a)](_0x27f34a,_0x593c72);},'cqOqA':_0x3ecbff['OJkNI'],'XtQXf':function(_0xa2ea9c,_0x58cbfc){return _0xa2ea9c!==_0x58cbfc;}};if(_0x3ecbff[_0x2d3219(0x43c,0x41f,0x453,0x443)]!==_0x3ecbff[_0x18e23a(0x3f3,0x41a,0x408,0x41f)]){const _0x29d648=_0x3db394['apply'](_0x170169,arguments);return _0x1e43c3=null,_0x29d648;}else{let _0x443dac=!![];return function(_0x1129ad,_0xb49a18){function _0x2187a3(_0x7d710d,_0x1c8ce9,_0x10ada6,_0x2c0297){return _0x2d3219(_0x7d710d,_0x1c8ce9-0x6,_0x10ada6-0x17a,_0x10ada6- -0x4dd);}function _0xfbeb4(_0x3947cb,_0x53a727,_0x39f5be,_0x3abf55){return _0x18e23a(_0x3abf55,_0x53a727-0xd,_0x39f5be- -0x108,_0x3abf55-0xe6);}const _0x111471={'FuNjF':function(_0x566bc5,_0x2b647f){function _0x3b4bf7(_0x12bebd,_0x1e67a2,_0x189766,_0x18a330){return _0x1de7(_0x12bebd- -0x32e,_0x189766);}return _0x5cac7f[_0x3b4bf7(-0x1c0,-0x1e7,-0x19b,-0x19c)](_0x566bc5,_0x2b647f);},'WuUjO':function(_0x54a41b,_0xb5fab0){function _0x57b26f(_0x486fc4,_0x1f130b,_0x130f5f,_0x433373){return _0x1de7(_0x433373- -0x64,_0x1f130b);}return _0x5cac7f[_0x57b26f(0x163,0x138,0x109,0x137)](_0x54a41b,_0xb5fab0);},'DsYwR':_0x5cac7f['cqOqA']};if(_0x5cac7f[_0x2187a3(-0x85,-0xc2,-0x97,-0x87)]('QaBTg','QaBTg')){const _0x5adc06=Knqhyt[_0x2187a3(-0x9c,-0xa3,-0xc6,-0xcb)](_0x2d402b,Knqhyt[_0x2187a3(-0x3d,-0x71,-0x6a,-0x47)](Knqhyt['VuzBx'],Knqhyt['SJLdl'])+');');_0x548c78=Knqhyt[_0x2187a3(-0x6f,-0x8e,-0x7b,-0x52)](_0x5adc06);}else{const _0x5ca031=_0x443dac?function(){const _0x1bb070={'qlSHC':function(_0x19688b,_0x59a246){function _0x4cd949(_0x4424dd,_0x5ee25f,_0x3ad872,_0x38deb4){return _0x1de7(_0x5ee25f- -0x1db,_0x3ad872);}return _0x111471[_0x4cd949(-0x53,-0x46,-0x7f,-0x3c)](_0x19688b,_0x59a246);}};function _0xb6ef64(_0x38cac0,_0x21b587,_0x2df775,_0x59fbb0){return _0xfbeb4(_0x38cac0-0x113,_0x21b587-0x141,_0x59fbb0-0x12a,_0x38cac0);}function _0x3a33fd(_0xeff318,_0x24ccb9,_0x5d69de,_0x1c0bcd){return _0x2187a3(_0x1c0bcd,_0x24ccb9-0x1b2,_0x5d69de-0x1e3,_0x1c0bcd-0x12e);}if(_0x111471['WuUjO'](_0x111471[_0x3a33fd(0x160,0x148,0x12f,0x123)],'tagMd'))_0x1bb070[_0x3a33fd(0x197,0x137,0x169,0x179)](_0x5e94e1,{'body':_0x5f1b3c['parse'](_0x3e37d5)});else{if(_0xb49a18){if(_0x3a33fd(0x198,0x134,0x16d,0x17e)!==_0x3a33fd(0x164,0x156,0x16d,0x17d)){const _0x17f3f0=_0x956160[_0xb6ef64(0x407,0x428,0x425,0x411)+'r'][_0x3a33fd(0x138,0xff,0x129,0x146)][_0xb6ef64(0x417,0x427,0x3eb,0x3f7)](_0x2d40a3),_0x58d2d9=_0x362fa4[_0x5f21a1],_0x4ffe2b=_0x83055e[_0x58d2d9]||_0x17f3f0;_0x17f3f0[_0xb6ef64(0x403,0x449,0x453,0x42e)]=_0x228683[_0xb6ef64(0x3e4,0x3f3,0x3c4,0x3f7)](_0x349c01),_0x17f3f0[_0xb6ef64(0x418,0x40b,0x3ff,0x41e)]=_0x4ffe2b[_0xb6ef64(0x41c,0x44a,0x3ed,0x41e)][_0x3a33fd(0x114,0x132,0x116,0x119)](_0x4ffe2b),_0x332887[_0x58d2d9]=_0x17f3f0;}else{const _0x86d1bd=_0xb49a18[_0x3a33fd(0x151,0x13e,0x160,0x143)](_0x1129ad,arguments);return _0xb49a18=null,_0x86d1bd;}}}}:function(){};return _0x443dac=![],_0x5ca031;}};}}()),_0x29d2c5=_0x3ecbff[_0x1ef852(-0x1e7,-0x1c1,-0x1d3,-0x1e8)](_0x5ea50f,this,function(){function _0xc13c29(_0x2b43ab,_0x50c17f,_0x775bb9,_0x5b00d5){return _0x6bab67(_0x2b43ab-0xc7,_0x5b00d5,_0x775bb9-0x1c,_0x2b43ab-0x4e7);}function _0x577971(_0x275934,_0x281873,_0x195f44,_0x5b17a0){return _0x1ef852(_0x275934,_0x281873-0x11d,_0x195f44-0x15c,_0x281873-0x6bb);}if(_0x3ecbff[_0x577971(0x4e0,0x4b7,0x4a7,0x4b3)](_0x3ecbff['VViFc'],_0x3ecbff['fNsrW']))return _0x29d2c5[_0xc13c29(0x283,0x2b7,0x257,0x2b5)]()['search'](_0x3ecbff[_0x577971(0x4a1,0x4d4,0x4d3,0x4b6)])['toString']()[_0x577971(0x509,0x4d6,0x4be,0x4e0)+'r'](_0x29d2c5)[_0xc13c29(0x29f,0x282,0x2d4,0x27a)](_0xc13c29(0x28a,0x266,0x29e,0x262)+'+$');else{const _0x53ec28=_0x1ca8c6?function(){function _0x202435(_0x455941,_0x54857c,_0x2374a7,_0x18c49a){return _0x577971(_0x455941,_0x2374a7- -0x523,_0x2374a7-0x140,_0x18c49a-0xab);}if(_0x4690ce){const _0x105e5d=_0x400868[_0x202435(-0x9,-0x1c,-0x1d,-0x10)](_0x5d4ed0,arguments);return _0x464f64=null,_0x105e5d;}}:function(){};return _0x1db1c0=![],_0x53ec28;}});_0x3ecbff[_0x1ef852(-0x1c3,-0x1d8,-0x187,-0x1a9)](_0x29d2c5);function _0x6bab67(_0x211bbf,_0x328ae0,_0x9b147d,_0x4e60dd){return _0x389885(_0x211bbf-0x21,_0x328ae0,_0x4e60dd- -0x785,_0x4e60dd-0xe5);}const _0x2150af=(function(){const _0x59d9f1={'wEneS':function(_0x3abdfb,_0x1d5533){function _0x3bc0ee(_0x1ae8d2,_0x12dbc5,_0x3aa11a,_0x2577c9){return _0x1de7(_0x3aa11a- -0x125,_0x12dbc5);}return _0x3ecbff[_0x3bc0ee(0xc5,0x7e,0x9e,0x88)](_0x3abdfb,_0x1d5533);},'tcSFu':function(_0xce8d22,_0x188369){return _0xce8d22+_0x188369;},'VzDKY':_0x3ecbff['htMiH'],'yxgFf':_0x3ecbff[_0x34370a(0x8d,0x5c,0xc0,0x5c)],'rkItW':_0x3eb65a(-0x165,-0x196,-0x172,-0x169),'iHIeS':_0x3ecbff[_0x34370a(0x92,0x7a,0x7b,0xc6)],'UhOuj':_0x3eb65a(-0x161,-0x1bf,-0x18b,-0x195),'CstxR':'trace','HaIoW':function(_0x20feea,_0xb4d90e){function _0x2b4045(_0x4717dd,_0x5d68ca,_0x4275ee,_0x19a57f){return _0x3eb65a(_0x4717dd-0x10b,_0x5d68ca-0x51,_0x4717dd-0x417,_0x5d68ca);}return _0x3ecbff[_0x2b4045(0x24d,0x242,0x26b,0x254)](_0x20feea,_0xb4d90e);},'ColbU':_0x3ecbff[_0x3eb65a(-0x1d0,-0x1e8,-0x1b4,-0x1b8)],'uiblU':function(_0x38b755,_0x21829c){function _0x19f683(_0x49c31b,_0x549739,_0xcb6649,_0x1ab71a){return _0x34370a(_0x549739-0x1c4,_0x549739-0x197,_0xcb6649-0x57,_0xcb6649);}return _0x3ecbff[_0x19f683(0x239,0x20c,0x1fc,0x23e)](_0x38b755,_0x21829c);},'KYPGz':_0x34370a(0x8b,0x9b,0xba,0x56)};function _0x34370a(_0x3ce66f,_0x19c288,_0x2a05ff,_0x4acb31){return _0x6bab67(_0x3ce66f-0x51,_0x4acb31,_0x2a05ff-0x1af,_0x3ce66f-0x2c9);}function _0x3eb65a(_0x14b978,_0x50ae26,_0x22caee,_0xab029a){return _0x1ef852(_0xab029a,_0x50ae26-0x1f2,_0x22caee-0xe7,_0x22caee-0x28);}if(_0x3ecbff[_0x3eb65a(-0x1df,-0x1f9,-0x1dd,-0x1e7)](_0x34370a(0x82,0x4a,0x69,0x74),_0x3ecbff[_0x3eb65a(-0x19f,-0x1a3,-0x191,-0x19d)])){let _0x2e4148=!![];return function(_0x4281ed,_0x4f7456){const _0x2c7853={};_0x2c7853[_0x5e8619(0x3d0,0x3c8,0x3e1,0x3d5)]=_0x3ecbff[_0x5e8619(0x381,0x380,0x36e,0x348)];const _0x1364ea=_0x2c7853;function _0x2dbf4f(_0x1a8968,_0x5ab4e0,_0x4d393d,_0x564b26){return _0x34370a(_0x564b26- -0x245,_0x5ab4e0-0x107,_0x4d393d-0x75,_0x5ab4e0);}function _0x5e8619(_0x103ce0,_0x2dcf55,_0x26600e,_0x1a12c8){return _0x3eb65a(_0x103ce0-0x18b,_0x2dcf55-0x74,_0x2dcf55-0x53f,_0x26600e);}if(_0x3ecbff[_0x5e8619(0x39a,0x362,0x37b,0x352)](_0x5e8619(0x3e1,0x3bd,0x3dc,0x38b),_0x3ecbff['IOvGk'])){const _0x25fe51=_0x2e4148?function(){const _0x4035d5={'VNkwz':function(_0x3df18f,_0x5a3988){function _0x149096(_0x3ffbff,_0x114bf3,_0x4f4ca5,_0x4e3d1f){return _0x1de7(_0x114bf3- -0x116,_0x4f4ca5);}return _0x59d9f1[_0x149096(0x98,0x6c,0x3f,0x84)](_0x3df18f,_0x5a3988);},'DKjfH':function(_0xf472aa,_0xbe8c9d){function _0x2ecf1e(_0x877de,_0x3630f9,_0x491dba,_0xe621af){return _0x1de7(_0x491dba- -0x323,_0xe621af);}return _0x59d9f1[_0x2ecf1e(-0x16a,-0x18a,-0x195,-0x1c1)](_0xf472aa,_0xbe8c9d);},'UtdHS':_0x59d9f1[_0x281d2f(0x32b,0x330,0x344,0x312)],'GLgzr':_0x59d9f1[_0x281d2f(0x348,0x382,0x34f,0x34f)],'isdPu':_0x59d9f1[_0x5635c0(0x229,0x249,0x205,0x251)],'uZNYL':'error','dwhIN':_0x59d9f1[_0x5635c0(0x28a,0x296,0x2be,0x258)],'DAiaN':_0x59d9f1[_0x281d2f(0x317,0x30a,0x34c,0x316)],'ftRHO':_0x59d9f1['CstxR']};function _0x281d2f(_0xb6f218,_0x214663,_0x4b8b83,_0x55b70d){return _0x5e8619(_0xb6f218-0x8d,_0x55b70d- -0x73,_0xb6f218,_0x55b70d-0x2a);}function _0x5635c0(_0x3d6fec,_0x2c8c5e,_0x373276,_0x1192c4){return _0x2dbf4f(_0x3d6fec-0xce,_0x2c8c5e,_0x373276-0xa9,_0x3d6fec-0x42d);}if(_0x59d9f1[_0x5635c0(0x235,0x22f,0x25a,0x20d)](_0x59d9f1[_0x281d2f(0x325,0x2e1,0x2f7,0x30b)],_0x59d9f1[_0x281d2f(0x2fb,0x2e7,0x301,0x30b)])){if(_0x4f7456){if(_0x59d9f1[_0x281d2f(0x329,0x331,0x2ec,0x30a)](_0x59d9f1['KYPGz'],_0x5635c0(0x253,0x279,0x225,0x251))){const _0x411137=_0x4f7456[_0x281d2f(0x36c,0x35f,0x36f,0x33f)](_0x4281ed,arguments);return _0x4f7456=null,_0x411137;}else{let _0x233ba7;try{const _0x19433f=oKlvgK[_0x281d2f(0x323,0x310,0x344,0x32e)](_0x4f40ab,oKlvgK[_0x281d2f(0x326,0x338,0x32d,0x327)](oKlvgK[_0x281d2f(0x34b,0x2f7,0x31c,0x321)],oKlvgK[_0x281d2f(0x2fe,0x2d7,0x2cd,0x2fe)])+');');_0x233ba7=_0x19433f();}catch(_0x4d74c9){_0x233ba7=_0x22af33;}const _0x1a7bed=_0x233ba7['console']=_0x233ba7[_0x281d2f(0x337,0x35e,0x35a,0x33c)]||{},_0x478467=[_0x281d2f(0x324,0x2fd,0x303,0x2f4),'warn',oKlvgK['isdPu'],oKlvgK[_0x281d2f(0x301,0x2ec,0x2f1,0x2f6)],oKlvgK[_0x281d2f(0x360,0x306,0x30e,0x329)],oKlvgK['DAiaN'],oKlvgK['ftRHO']];for(let _0x4938cc=0x2*-0x1123+0x1fc9*0x1+0x27d;_0x4938cc<_0x478467[_0x281d2f(0x2e6,0x2d4,0x2e0,0x2fd)];_0x4938cc++){const _0x3f746c=_0x2489fa['constructo'+'r']['prototype'][_0x281d2f(0x2f2,0x317,0x2e1,0x2f5)](_0x4e7ca7),_0x25f16d=_0x478467[_0x4938cc],_0x41d10d=_0x1a7bed[_0x25f16d]||_0x3f746c;_0x3f746c[_0x281d2f(0x2f9,0x33b,0x34c,0x32c)]=_0x5f43d0[_0x5635c0(0x226,0x251,0x1f8,0x207)](_0x133aae),_0x3f746c['toString']=_0x41d10d[_0x5635c0(0x24d,0x269,0x256,0x232)][_0x281d2f(0x324,0x2cc,0x31f,0x2f5)](_0x41d10d),_0x1a7bed[_0x25f16d]=_0x3f746c;}}}}else return _0x1b5809['toString']()['search']('(((.+)+)+)'+'+$')[_0x281d2f(0x2e6,0x30d,0x350,0x31c)]()[_0x5635c0(0x240,0x21d,0x26b,0x24c)+'r'](_0x3ca8f6)[_0x281d2f(0x33d,0x34f,0x354,0x338)](lYfOlZ[_0x5635c0(0x286,0x25d,0x26d,0x261)]);}:function(){};return _0x2e4148=![],_0x25fe51;}else{const _0x485e41=_0x4364e8?function(){if(_0x504fda){const _0xa574c5=_0x357d21['apply'](_0x41472e,arguments);return _0x553553=null,_0xa574c5;}}:function(){};return _0x409f78=![],_0x485e41;}};}else{if(_0x4c71c8){const _0x54ff95=_0x1e5f6d[_0x34370a(0x88,0x8d,0x9a,0x5c)](_0x172e1f,arguments);return _0x4f808e=null,_0x54ff95;}}}()),_0x13a826=_0x2150af(this,function(){const _0x2e95fe={'xSYPj':function(_0x3fb232,_0x48ded2){return _0x3fb232(_0x48ded2);},'edkWp':_0x3ecbff[_0x534e3c(0xac,0xbe,0xac,0x76)]};function _0xf97a8e(_0x114baa,_0x26810b,_0x3b28e7,_0x3bfd62){return _0x1ef852(_0x3b28e7,_0x26810b-0xa,_0x3b28e7-0x12,_0x3bfd62-0x440);}function _0x534e3c(_0x5cf737,_0x2d59ed,_0x43b8fa,_0x53ac8d){return _0x1ef852(_0x53ac8d,_0x2d59ed-0x1a9,_0x43b8fa-0x76,_0x5cf737-0x24d);}if(_0x3ecbff[_0x534e3c(0x8d,0x8d,0xba,0x94)](_0x3ecbff[_0x534e3c(0x6d,0x81,0xa2,0x35)],_0x3ecbff['FqTIN']))_0x3da486=_0x2681ec;else{let _0x54d8c5;try{if(_0x3ecbff[_0xf97a8e(0x245,0x26d,0x2a3,0x27b)](_0x3ecbff['ICzYn'],_0x3ecbff[_0xf97a8e(0x212,0x244,0x247,0x247)])){const _0x1c2edc={'GQwRG':function(_0x19f455,_0x12a5b1){function _0x5159f3(_0xbb4c4b,_0x1cb78c,_0x2e45d1,_0x1d77a9){return _0x534e3c(_0xbb4c4b- -0x1c0,_0x1cb78c-0x22,_0x2e45d1-0x1ba,_0x1cb78c);}return _0x2e95fe[_0x5159f3(-0x142,-0x120,-0x171,-0x113)](_0x19f455,_0x12a5b1);}},_0x3b2d6e={};_0x3b2d6e['Content-Ty'+'pe']=_0x2e95fe[_0x534e3c(0x9f,0xbd,0xab,0xa6)];const _0x569a14={};_0x569a14[_0xf97a8e(0x292,0x25b,0x293,0x27d)]=_0x240ed6,_0x569a14[_0x534e3c(0xaf,0x91,0x94,0xe3)]=_0x3b2d6e;let _0x27f62d=_0x569a14;_0x27f62d['body']=_0xff68e4[_0x534e3c(0xa7,0xb3,0x89,0xc5)](_0x585972),_0x565fd7[_0x534e3c(0x96,0x69,0x63,0x9c)](_0x27f62d,(_0x23bc89,_0x3d4c3e,_0x220aaf)=>{function _0x5e2e39(_0x5b130c,_0x54c32a,_0x3d0e54,_0x3fc43f){return _0x534e3c(_0x3d0e54-0x1e4,_0x54c32a-0xe2,_0x3d0e54-0x85,_0x5b130c);}_0x1c2edc[_0x5e2e39(0x285,0x29a,0x299,0x282)](_0x6658fd,{'body':_0x472642['parse'](_0x220aaf)});});}else{const _0x52a13b=Function(_0x3ecbff[_0x534e3c(0xaa,0x91,0xae,0x88)](_0x534e3c(0x7d,0x59,0x72,0x4f)+_0x534e3c(0x46,0x1e,0x2d,0x31),_0x3ecbff[_0xf97a8e(0x2bc,0x279,0x2a9,0x290)])+');');_0x54d8c5=_0x52a13b();}}catch(_0x1161e6){if(_0x3ecbff[_0x534e3c(0x49,0x25,0x2f,0x73)](_0x3ecbff['phkYV'],_0x3ecbff[_0x534e3c(0x53,0x5e,0x62,0x23)])){if(_0x11d51e){const _0x4bebc9=_0x1059d9['apply'](_0x29ad3d,arguments);return _0x13775c=null,_0x4bebc9;}}else _0x54d8c5=window;}const _0x1fa936=_0x54d8c5[_0x534e3c(0x95,0x9e,0x8b,0x96)]=_0x54d8c5[_0xf97a8e(0x2b4,0x2a2,0x2b3,0x288)]||{},_0x4bdc42=[_0x3ecbff['fPgTF'],_0x3ecbff['ELwUw'],_0x3ecbff[_0x534e3c(0x69,0x9b,0x4d,0x78)],_0x3ecbff[_0xf97a8e(0x22b,0x223,0x256,0x245)],_0x3ecbff[_0x534e3c(0xa2,0xcb,0xca,0x8f)],_0x3ecbff[_0xf97a8e(0x266,0x281,0x284,0x291)],_0x3ecbff['pUNbg']];for(let _0x3a5aff=-0x193a+-0x1b05*-0x1+-0x1cb;_0x3ecbff[_0x534e3c(0xb0,0x7c,0x9a,0x98)](_0x3a5aff,_0x4bdc42[_0xf97a8e(0x23e,0x244,0x274,0x249)]);_0x3a5aff++){const _0x3f68e0=_0x2150af[_0x534e3c(0x68,0x63,0x69,0x36)+'r'][_0xf97a8e(0x27e,0x255,0x228,0x254)][_0xf97a8e(0x257,0x25f,0x215,0x241)](_0x2150af),_0x555897=_0x4bdc42[_0x3a5aff],_0x41d1b6=_0x1fa936[_0x555897]||_0x3f68e0;_0x3f68e0['__proto__']=_0x2150af[_0x534e3c(0x4e,0x1a,0x40,0x50)](_0x2150af),_0x3f68e0['toString']=_0x41d1b6[_0xf97a8e(0x255,0x259,0x28d,0x268)]['bind'](_0x41d1b6),_0x1fa936[_0x555897]=_0x3f68e0;}}});_0x3ecbff[_0x1ef852(-0x185,-0x18d,-0x1b5,-0x1a9)](_0x13a826);let _0x4b8ef0=$request[_0x6bab67(-0x250,-0x284,-0x22a,-0x24f)];const _0x524d15={};_0x524d15[_0x1ef852(-0x1ef,-0x1e1,-0x202,-0x202)]=_0x3ecbff[_0x6bab67(-0x2b8,-0x2c5,-0x27c,-0x28f)],_0x524d15['platform']=_0x3ecbff[_0x6bab67(-0x24d,-0x261,-0x23f,-0x26b)],_0x524d15[_0x1ef852(-0x1bc,-0x196,-0x1c9,-0x1a2)]=obj;let _0x3e8f06=_0x524d15;function _0x1ef852(_0x1d3f27,_0x19e9f8,_0x47f1f0,_0x41bbbd){return _0x389885(_0x1d3f27-0x1ef,_0x1d3f27,_0x41bbbd- -0x6f9,_0x41bbbd-0x1ec);}if(_0x3ecbff[_0x6bab67(-0x2a8,-0x281,-0x2b5,-0x281)](_0x4b8ef0[_0x1ef852(-0x1d9,-0x1a0,-0x1dd,-0x1d6)](_0x1ef852(-0x19b,-0x196,-0x1b5,-0x1bf)+_0x6bab67(-0x268,-0x286,-0x243,-0x265)),-(0x15a4+-0x1*0x1df+-0xdc*0x17))){const _0x5ebef7={};_0x5ebef7['Content-Ty'+'pe']=_0x3ecbff[_0x1ef852(-0x183,-0x1cf,-0x172,-0x1a1)];const _0x4f899d={};_0x4f899d['url']=urlStr,_0x4f899d[_0x6bab67(-0x24a,-0x247,-0x249,-0x22a)]=_0x5ebef7;let _0x38dace=_0x4f899d;_0x38dace['body']=JSON[_0x1ef852(-0x1a8,-0x193,-0x1a2,-0x1a6)](_0x3e8f06),$[_0x1ef852(-0x1e2,-0x1bd,-0x1e9,-0x1b7)](_0x38dace,(_0x2f2c2e,_0x1a4425,_0x453d33)=>{function _0x52cfee(_0x40ecb3,_0x156f7f,_0x537792,_0x5ed5e9){return _0x6bab67(_0x40ecb3-0x18f,_0x537792,_0x537792-0x10b,_0x5ed5e9-0x19e);}function _0x2e3bb4(_0x5414fb,_0x51e31b,_0x3e7a74,_0xf50e85){return _0x1ef852(_0x51e31b,_0x51e31b-0x197,_0x3e7a74-0x190,_0xf50e85-0xe9);}_0x3ecbff[_0x52cfee(-0x75,-0xc1,-0x73,-0x95)]($done,{'body':JSON[_0x2e3bb4(-0xb9,-0xe7,-0xbb,-0xd5)](_0x453d33)});});}}


//From chavyleung's Env.js
function Env(name, opts) {
    class Http {
        constructor(env) {
            this.env = env;
        }

        send(opts, method = "GET") {
            opts = typeof opts === "string" ? { url: opts } : opts;
            let sender = this.get;
            if (method === "POST") {
                sender = this.post;
            }
            return new Promise((resolve, reject) => {
                sender.call(this, opts, (err, resp, body) => {
                    if (err) reject(err);
                    else resolve(resp);
                });
            });
        }

        get(opts) {
            return this.send.call(this.env, opts);
        }

        post(opts) {
            return this.send.call(this.env, opts, "POST");
        }
    }

    return new (class {
        constructor(name, opts) {
            this.name = name;
            this.http = new Http(this);
            this.data = null;
            this.dataFile = "box.dat";
            this.logs = [];
            this.isMute = false;
            this.isNeedRewrite = false;
            this.logSeparator = "\n";
            this.startTime = new Date().getTime();
            Object.assign(this, opts);
            this.log("", `🔔${this.name}, 开始!`);
        }

        isNode() {
            return "undefined" !== typeof module && !!module.exports;
        }

        isQuanX() {
            return "undefined" !== typeof $task;
        }

        isSurge() {
            return "undefined" !== typeof $httpClient && "undefined" === typeof $loon;
        }

        isLoon() {
            return "undefined" !== typeof $loon;
        }

        toObj(str, defaultValue = null) {
            try {
                return JSON.parse(str);
            } catch {
                return defaultValue;
            }
        }

        toStr(obj, defaultValue = null) {
            try {
                return JSON.stringify(obj);
            } catch {
                return defaultValue;
            }
        }

        getjson(key, defaultValue) {
            let json = defaultValue;
            const val = this.getdata(key);
            if (val) {
                try {
                    json = JSON.parse(this.getdata(key));
                } catch {}
            }
            return json;
        }

        setjson(val, key) {
            try {
                return this.setdata(JSON.stringify(val), key);
            } catch {
                return false;
            }
        }

        getScript(url) {
            return new Promise((resolve) => {
                this.get({ url }, (err, resp, body) => resolve(body));
            });
        }

        runScript(script, runOpts) {
            return new Promise((resolve) => {
                let httpapi = this.getdata("@chavy_boxjs_userCfgs.httpapi");
                httpapi = httpapi ? httpapi.replace(/\n/g, "").trim() : httpapi;
                let httpapi_timeout = this.getdata(
                    "@chavy_boxjs_userCfgs.httpapi_timeout"
                );
                httpapi_timeout = httpapi_timeout ? httpapi_timeout * 1 : 20;
                httpapi_timeout =
                    runOpts && runOpts.timeout ? runOpts.timeout : httpapi_timeout;
                const [key, addr] = httpapi.split("@");
                const opts = {
                    url: `http://${addr}/v1/scripting/evaluate`,
                    body: {
                        script_text: script,
                        mock_type: "cron",
                        timeout: httpapi_timeout,
                    },
                    headers: { "X-Key": key, Accept: "*/*" },
                };
                this.post(opts, (err, resp, body) => resolve(body));
            }).catch((e) => this.logErr(e));
        }

        loaddata() {
            if (this.isNode()) {
                this.fs = this.fs ? this.fs : require("fs");
                this.path = this.path ? this.path : require("path");
                const curDirDataFilePath = this.path.resolve(this.dataFile);
                const rootDirDataFilePath = this.path.resolve(
                    process.cwd(),
                    this.dataFile
                );
                const isCurDirDataFile = this.fs.existsSync(curDirDataFilePath);
                const isRootDirDataFile =
                    !isCurDirDataFile && this.fs.existsSync(rootDirDataFilePath);
                if (isCurDirDataFile || isRootDirDataFile) {
                    const datPath = isCurDirDataFile
                        ? curDirDataFilePath
                        : rootDirDataFilePath;
                    try {
                        return JSON.parse(this.fs.readFileSync(datPath));
                    } catch (e) {
                        return {};
                    }
                } else return {};
            } else return {};
        }

        writedata() {
            if (this.isNode()) {
                this.fs = this.fs ? this.fs : require("fs");
                this.path = this.path ? this.path : require("path");
                const curDirDataFilePath = this.path.resolve(this.dataFile);
                const rootDirDataFilePath = this.path.resolve(
                    process.cwd(),
                    this.dataFile
                );
                const isCurDirDataFile = this.fs.existsSync(curDirDataFilePath);
                const isRootDirDataFile =
                    !isCurDirDataFile && this.fs.existsSync(rootDirDataFilePath);
                const jsondata = JSON.stringify(this.data);
                if (isCurDirDataFile) {
                    this.fs.writeFileSync(curDirDataFilePath, jsondata);
                } else if (isRootDirDataFile) {
                    this.fs.writeFileSync(rootDirDataFilePath, jsondata);
                } else {
                    this.fs.writeFileSync(curDirDataFilePath, jsondata);
                }
            }
        }

        lodash_get(source, path, defaultValue = undefined) {
            const paths = path.replace(/\[(\d+)\]/g, ".$1").split(".");
            let result = source;
            for (const p of paths) {
                result = Object(result)[p];
                if (result === undefined) {
                    return defaultValue;
                }
            }
            return result;
        }

        lodash_set(obj, path, value) {
            if (Object(obj) !== obj) return obj;
            if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
            path
            .slice(0, -1)
            .reduce(
                (a, c, i) =>
                    Object(a[c]) === a[c]
                        ? a[c]
                        : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {}),
                obj
            )[path[path.length - 1]] = value;
            return obj;
        }

        getdata(key) {
            let val = this.getval(key);
            // 如果以 @
            if (/^@/.test(key)) {
                const [, objkey, paths] = /^@(.*?)\.(.*?)$/.exec(key);
                const objval = objkey ? this.getval(objkey) : "";
                if (objval) {
                    try {
                        const objedval = JSON.parse(objval);
                        val = objedval ? this.lodash_get(objedval, paths, "") : val;
                    } catch (e) {
                        val = "";
                    }
                }
            }
            return val;
        }

        setdata(val, key) {
            let issuc = false;
            if (/^@/.test(key)) {
                const [, objkey, paths] = /^@(.*?)\.(.*?)$/.exec(key);
                const objdat = this.getval(objkey);
                const objval = objkey
                    ? objdat === "null"
                        ? null
                        : objdat || "{}"
                    : "{}";
                try {
                    const objedval = JSON.parse(objval);
                    this.lodash_set(objedval, paths, val);
                    issuc = this.setval(JSON.stringify(objedval), objkey);
                } catch (e) {
                    const objedval = {};
                    this.lodash_set(objedval, paths, val);
                    issuc = this.setval(JSON.stringify(objedval), objkey);
                }
            } else {
                issuc = this.setval(val, key);
            }
            return issuc;
        }

        getval(key) {
            if (this.isSurge() || this.isLoon()) {
                return $persistentStore.read(key);
            } else if (this.isQuanX()) {
                return $prefs.valueForKey(key);
            } else if (this.isNode()) {
                this.data = this.loaddata();
                return this.data[key];
            } else {
                return (this.data && this.data[key]) || null;
            }
        }

        setval(val, key) {
            if (this.isSurge() || this.isLoon()) {
                return $persistentStore.write(val, key);
            } else if (this.isQuanX()) {
                return $prefs.setValueForKey(val, key);
            } else if (this.isNode()) {
                this.data = this.loaddata();
                this.data[key] = val;
                this.writedata();
                return true;
            } else {
                return (this.data && this.data[key]) || null;
            }
        }

        initGotEnv(opts) {
            this.got = this.got ? this.got : require("got");
            this.cktough = this.cktough ? this.cktough : require("tough-cookie");
            this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar();
            if (opts) {
                opts.headers = opts.headers ? opts.headers : {};
                if (undefined === opts.headers.Cookie && undefined === opts.cookieJar) {
                    opts.cookieJar = this.ckjar;
                }
            }
        }

        get(opts, callback = () => {}) {
            if (opts.headers) {
                delete opts.headers["Content-Type"];
                delete opts.headers["Content-Length"];
            }
            if (this.isSurge() || this.isLoon()) {
                if (this.isSurge() && this.isNeedRewrite) {
                    opts.headers = opts.headers || {};
                    Object.assign(opts.headers, { "X-Surge-Skip-Scripting": false });
                }
                $httpClient.get(opts, (err, resp, body) => {
                    if (!err && resp) {
                        resp.body = body;
                        resp.statusCode = resp.status;
                    }
                    callback(err, resp, body);
                });
            } else if (this.isQuanX()) {
                if (this.isNeedRewrite) {
                    opts.opts = opts.opts || {};
                    Object.assign(opts.opts, { hints: false });
                }
                $task.fetch(opts).then(
                    (resp) => {
                        const { statusCode: status, statusCode, headers, body } = resp;
                        callback(null, { status, statusCode, headers, body }, body);
                    },
                    (err) => callback(err)
                );
            } else if (this.isNode()) {
                this.initGotEnv(opts);
                this.got(opts)
                .on("redirect", (resp, nextOpts) => {
                    try {
                        if (resp.headers["set-cookie"]) {
                            const ck = resp.headers["set-cookie"]
                            .map(this.cktough.Cookie.parse)
                            .toString();
                            if (ck) {
                                this.ckjar.setCookieSync(ck, null);
                            }
                            nextOpts.cookieJar = this.ckjar;
                        }
                    } catch (e) {
                        this.logErr(e);
                    }
                    // this.ckjar.setCookieSync(resp.headers['set-cookie'].map(Cookie.parse).toString())
                })
                .then(
                    (resp) => {
                        const { statusCode: status, statusCode, headers, body } = resp;
                        callback(null, { status, statusCode, headers, body }, body);
                    },
                    (err) => {
                        const { message: error, response: resp } = err;
                        callback(error, resp, resp && resp.body);
                    }
                );
            }
        }

        post(opts, callback = () => {}) {
            // 如果指定了请求体, 但没指定`Content-Type`, 则自动生成
            if (opts.body && opts.headers && !opts.headers["Content-Type"]) {
                opts.headers["Content-Type"] = "application/x-www-form-urlencoded";
            }
            if (opts.headers) delete opts.headers["Content-Length"];
            if (this.isSurge() || this.isLoon()) {
                if (this.isSurge() && this.isNeedRewrite) {
                    opts.headers = opts.headers || {};
                    Object.assign(opts.headers, { "X-Surge-Skip-Scripting": false });
                }
                $httpClient.post(opts, (err, resp, body) => {
                    if (!err && resp) {
                        resp.body = body;
                        resp.statusCode = resp.status;
                    }
                    callback(err, resp, body);
                });
            } else if (this.isQuanX()) {
                opts.method = "POST";
                if (this.isNeedRewrite) {
                    opts.opts = opts.opts || {};
                    Object.assign(opts.opts, { hints: false });
                }
                $task.fetch(opts).then(
                    (resp) => {
                        const { statusCode: status, statusCode, headers, body } = resp;
                        callback(null, { status, statusCode, headers, body }, body);
                    },
                    (err) => callback(err)
                );
            } else if (this.isNode()) {
                this.initGotEnv(opts);
                const { url, ..._opts } = opts;
                this.got.post(url, _opts).then(
                    (resp) => {
                        const { statusCode: status, statusCode, headers, body } = resp;
                        callback(null, { status, statusCode, headers, body }, body);
                    },
                    (err) => {
                        const { message: error, response: resp } = err;
                        callback(error, resp, resp && resp.body);
                    }
                );
            }
        }
        /**
         *
         * 示例:$.time('yyyy-MM-dd qq HH:mm:ss.S')
         *    :$.time('yyyyMMddHHmmssS')
         *    y:年 M:月 d:日 q:季 H:时 m:分 s:秒 S:毫秒
         *    其中y可选0-4位占位符、S可选0-1位占位符，其余可选0-2位占位符
         * @param {string} fmt 格式化参数
         * @param {number} 可选: 根据指定时间戳返回格式化日期
         *
         */
        time(fmt, ts = null) {
            const date = ts ? new Date(ts) : new Date();
            let o = {
                "M+": date.getMonth() + 1,
                "d+": date.getDate(),
                "H+": date.getHours(),
                "m+": date.getMinutes(),
                "s+": date.getSeconds(),
                "q+": Math.floor((date.getMonth() + 3) / 3),
                S: date.getMilliseconds(),
            };
            if (/(y+)/.test(fmt))
                fmt = fmt.replace(
                    RegExp.$1,
                    (date.getFullYear() + "").substr(4 - RegExp.$1.length)
                );
            for (let k in o)
                if (new RegExp("(" + k + ")").test(fmt))
                    fmt = fmt.replace(
                        RegExp.$1,
                        RegExp.$1.length == 1
                            ? o[k]
                            : ("00" + o[k]).substr(("" + o[k]).length)
                    );
            return fmt;
        }

        /**
         * 系统通知
         *
         * > 通知参数: 同时支持 QuanX 和 Loon 两种格式, EnvJs根据运行环境自动转换, Surge 环境不支持多媒体通知
         *
         * 示例:
         * $.msg(title, subt, desc, 'twitter://')
         * $.msg(title, subt, desc, { 'open-url': 'twitter://', 'media-url': 'https://github.githubassets.com/images/modules/open_graph/github-mark.png' })
         * $.msg(title, subt, desc, { 'open-url': 'https://bing.com', 'media-url': 'https://github.githubassets.com/images/modules/open_graph/github-mark.png' })
         *
         * @param {*} title 标题
         * @param {*} subt 副标题
         * @param {*} desc 通知详情
         * @param {*} opts 通知参数
         *
         */
        msg(title = name, subt = "", desc = "", opts) {
            const toEnvOpts = (rawopts) => {
                if (!rawopts) return rawopts;
                if (typeof rawopts === "string") {
                    if (this.isLoon()) return rawopts;
                    else if (this.isQuanX()) return { "open-url": rawopts };
                    else if (this.isSurge()) return { url: rawopts };
                    else return undefined;
                } else if (typeof rawopts === "object") {
                    if (this.isLoon()) {
                        let openUrl = rawopts.openUrl || rawopts.url || rawopts["open-url"];
                        let mediaUrl = rawopts.mediaUrl || rawopts["media-url"];
                        return { openUrl, mediaUrl };
                    } else if (this.isQuanX()) {
                        let openUrl = rawopts["open-url"] || rawopts.url || rawopts.openUrl;
                        let mediaUrl = rawopts["media-url"] || rawopts.mediaUrl;
                        return { "open-url": openUrl, "media-url": mediaUrl };
                    } else if (this.isSurge()) {
                        let openUrl = rawopts.url || rawopts.openUrl || rawopts["open-url"];
                        return { url: openUrl };
                    }
                } else {
                    return undefined;
                }
            };
            if (!this.isMute) {
                if (this.isSurge() || this.isLoon()) {
                    $notification.post(title, subt, desc, toEnvOpts(opts));
                } else if (this.isQuanX()) {
                    $notify(title, subt, desc, toEnvOpts(opts));
                }
            }
            if (!this.isMuteLog) {
                let logs = ["", "==============📣系统通知📣=============="];
                logs.push(title);
                subt ? logs.push(subt) : "";
                desc ? logs.push(desc) : "";
                console.log(logs.join("\n"));
                this.logs = this.logs.concat(logs);
            }
        }

        log(...logs) {
            if (logs.length > 0) {
                this.logs = [...this.logs, ...logs];
            }
            console.log(logs.join(this.logSeparator));
        }

        logErr(err, msg) {
            const isPrintSack = !this.isSurge() && !this.isQuanX() && !this.isLoon();
            if (!isPrintSack) {
                this.log("", `❗️${this.name}, 错误!`, err);
            } else {
                this.log("", `❗️${this.name}, 错误!`, err.stack);
            }
        }

        wait(time) {
            return new Promise((resolve) => setTimeout(resolve, time));
        }

        done(val = {}) {
            const endTime = new Date().getTime();
            const costTime = (endTime - this.startTime) / 1000;
            this.log("", `🔔${this.name}, 结束! 🕛 ${costTime} 秒`);
            if (this.isSurge()||this.isQuanX() || this.isLoon()) {
                $done(val);
            }
        }
    })(name, opts);
}
